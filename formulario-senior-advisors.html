<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Senior Advisors - Senior Advisors</title>
    <link rel="stylesheet" href="formulario-senior-advisors.css">
</head>
<body>
    <div class="backdrop-formulario" data-node-id="168-568">
        <!-- Logo -->
        <div class="logo-container" data-node-id="197-575">
            <img src="assets/logo_dark.png" alt="Logo Senior Advisors">
        </div>

        <!-- Back Button -->
        <a href="contacto.html" class="back-button" data-node-id="368-774">
            <div class="back-icon">
                <img src="assets/arrow_back.svg" alt="Back">
            </div>
            <span>volver</span>
        </a>

        <!-- Main Form Container -->
        <div class="form-container" data-node-id="197-496">
            <!-- Header -->
            <h1 class="form-title" data-node-id="197-497">Formulario de registro</h1>
            <p class="form-subtitle" data-node-id="197-499">Senior Advisor</p>
            <p class="form-description" data-node-id="197-576">¿Tienes la experiencia y visión para acompañar procesos de transformación empresarial? Únete a nuestra red de Senior Advisors y forma parte de una comunidad que impulsa el cambio desde el conocimiento, la estrategia y la acción.</p>

            <!-- Form Fields -->
            <form class="registration-form" id="advisorsForm">
                
                <!-- Nombre -->
                <div class="form-field" data-node-id="197-586">
                    <label>Nombre <span class="required">*</span></label>
                    <input type="text" name="nombre" data-node-id="197-578" required>
                </div>

                <!-- Apellidos -->
                <div class="form-field" data-node-id="197-587">
                    <label>Apellidos<span class="required"> *</span></label>
                    <input type="text" name="apellidos" data-node-id="197-581" required>
                </div>

                <!-- Correo electrónico -->
                <div class="form-field" data-node-id="197-588">
                    <label>Correo electrónico<span class="required"> *</span></label>
                    <input type="email" name="email" data-node-id="197-584" required>
                </div>

                <!-- Teléfono -->
                <div class="form-field" data-node-id="200-591">
                    <label>Teléfono <span class="required">*</span></label>
                    <input type="tel" name="telefono" data-node-id="200-589" required>
                </div>

                <!-- Dirección Section -->
                <h3 class="section-title" data-node-id="197-509">Dirección</h3>

                <!-- Calle -->
                <div class="form-field" data-node-id="200-594">
                    <label>Calle <span class="required">*</span></label>
                    <input type="text" name="calle" data-node-id="200-592" required>
                </div>

                <!-- Municipio -->
                <div class="form-field" data-node-id="200-595">
                    <label>Municipio <span class="required">*</span></label>
                    <input type="text" name="municipio" data-node-id="200-597" required>
                </div>

                <!-- Código postal -->
                <div class="form-field" data-node-id="200-599">
                    <label>Código postal <span class="required">*</span></label>
                    <input type="text" name="codigo_postal" data-node-id="200-601" required>
                </div>

                <!-- Divider Line -->
                <div class="divider-line" data-node-id="200-697"></div>

                <!-- LinkedIn -->
                <div class="form-field" data-node-id="200-603">
                    <label>Enlace a perfil de LinkedIn <span class="required">*</span></label>
                    <input type="url" name="linkedin" data-node-id="200-605" required>
                </div>

                <!-- Años de experiencia -->
                <div class="form-field form-field-narrow" data-node-id="200-615">
                    <label>Años de experiencia en posiciones de responsabilidad <span class="required">*</span></label>
                    <input type="number" name="anos_experiencia" data-node-id="200-617" required>
                </div>

                <!-- Horas semanales -->
                <div class="form-field form-field-narrow" data-node-id="200-619">
                    <label>Horas semanales que quisiera dedicar a la labor de Senior Advisor <span class="required">*</span></label>
                    <input type="number" name="horas_semanales" data-node-id="200-621" required>
                </div>

                <!-- Horario Preferente -->
                <label class="standalone-label" data-node-id="197-523">Horario Preferente<span class="required"> *</span></label>
                
                <div class="time-slots-container">
                    <input type="time" name="horario_inicio" class="time-input" data-node-id="200-623" required>
                    <div class="arrow-icon" data-node-id="200-686">
                        <img src="assets/arrow_forward.svg" alt="Arrow">
                    </div>
                    <input type="time" name="horario_fin" class="time-input" data-node-id="200-625" required>
                </div>

                <!-- Días de la semana -->
                <div class="weekdays-container" data-node-id="200-682">
                    <div class="checkbox-item" data-checkbox>
                        <input type="checkbox" name="dias_semana[]" value="Lunes" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-641">
                        <label data-node-id="200-627">Lunes</label>
                    </div>
                    <div class="checkbox-item" data-checkbox>
                        <input type="checkbox" name="dias_semana[]" value="Martes" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-655">
                        <label data-node-id="200-658">Martes</label>
                    </div>
                    <div class="checkbox-item" data-checkbox>
                        <input type="checkbox" name="dias_semana[]" value="Miercoles" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-666">
                        <label data-node-id="200-667">Miercoles</label>
                    </div>
                    <div class="checkbox-item" data-checkbox>
                        <input type="checkbox" name="dias_semana[]" value="Jueves" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-672">
                        <label data-node-id="200-673">Jueves</label>
                    </div>
                    <div class="checkbox-item" data-checkbox>
                        <input type="checkbox" name="dias_semana[]" value="Viernes" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-677">
                        <label data-node-id="200-678">Viernes</label>
                    </div>
                </div>

                <!-- Honorarios preferidos -->
                <div class="honorarios-section" data-node-id="197-525">
                    <p>Honorarios preferidos:</p>
                    <p class="honorarios-item">·        Fee mínimo/hora:</p>
                    <p class="honorarios-item">·        Fee mínimo/mes para las horas marcadas</p>
                    <p class="honorarios-item">·        Fee mínimo conferencias en cliente</p>
                </div>

                <textarea class="textarea-large" name="honorarios" data-node-id="200-698"></textarea>

                <!-- Disponibilidad para viajar -->
                <label class="standalone-label" data-node-id="197-527">Disponibilidad para viajar <span class="required">*</span></label>
                
                <div class="yes-no-container" data-node-id="200-709">
                    <div class="checkbox-item" data-radio-group="disponibilidad_viajar">
                        <input type="radio" name="disponibilidad_viajar" value="Sí" class="hidden-checkbox" required>
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Sí</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="disponibilidad_viajar">
                        <input type="radio" name="disponibilidad_viajar" value="No" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>No</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="disponibilidad_viajar">
                        <input type="radio" name="disponibilidad_viajar" value="Limitada" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Limitada</label>
                    </div>
                </div>

                <!-- Bio resumida -->
                <label class="standalone-label" data-node-id="197-529">Bio resumida <span class="required">*</span></label>
                <p class="helper-text" data-node-id="200-725">*Esto será lo que verán nuestros clientes en su primer contacto con el Senior Advisor</p>
                <textarea class="textarea-medium" name="bio" data-node-id="200-727" required></textarea>

                <!-- Areas de Intervención preferidas -->
                <label class="standalone-label" data-node-id="197-531">Areas de Intervención preferidas <span class="required">*</span></label>

                <div class="areas-container">
                    <div class="areas-column" data-node-id="200-729">
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Estrategia y evolución de la compañía" class="hidden-checkbox" required>
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Estrategia y evolución de la compañía</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Estrategia de talento, organización y planes de sucesión" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Estrategia de talento, organización y planes de sucesión</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Posicionamiento estratégico en el mercado" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Posicionamiento estratégico en el mercado</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Tendencias tecnológicas e impacto en el modelo de negocio" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Tendencias tecnológicas e impacto en el modelo de negocio</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Madurez tecnológica" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Madurez tecnológica</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Otros" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Otros</label>
                        </div>
                    </div>
                    <div class="areas-column" data-node-id="200-775">
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Gestión de riesgos y solvencia financiera" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Gestión de riesgos y solvencia financiera</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Internacionalización" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Internacionalización</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Evolución y profesionalización de la empresa familiar" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Evolución y profesionalización de la empresa familiar</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Supply chain" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Supply chain</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Compromiso social y 3er sector" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Compromiso social y 3er sector</label>
                        </div>
                        <div class="checkbox-item" data-checkbox>
                            <input type="checkbox" name="areas_intervencion[]" value="Importación / Exportación" class="hidden-checkbox">
                            <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                            <label>Importación / Exportación</label>
                        </div>
                    </div>
                </div>

                <!-- Resultados e intervención -->
                <label class="standalone-label" data-node-id="197-533">Resultados e intervención en las areas seleccionadas <span class="required">*</span></label>
                <p class="helper-text" data-node-id="200-814">*ejemplos donde se hayan llevado a cabo proyectos relacionados con estas areas de intervención</p>
                <textarea class="textarea-medium" name="resultados" data-node-id="200-812" required></textarea>

                <!-- Certificación -->
                <label class="standalone-label" data-node-id="197-535">Quieres acceder a los modulos de certificación a medida que se vayan construyendo?</label>
                <div class="checkbox-vertical" data-node-id="200-816">
                    <div class="checkbox-item" data-radio-group="certificacion">
                        <input type="radio" name="certificacion" value="Sí" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Me gustaría acceder a los módulos de certificación</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="certificacion">
                        <input type="radio" name="certificacion" value="No" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>No me gustaría acceder a los módulos de certificación</label>
                    </div>
                </div>

                <!-- Notificaciones -->
                <label class="standalone-label" data-node-id="197-539">Quieres recibir notificaciones de la comunidad de senior advisors?</label>
                <div class="yes-no-container" data-node-id="200-848">
                    <div class="checkbox-item" data-radio-group="notificaciones">
                        <input type="radio" name="notificaciones" value="Sí" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Sí</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="notificaciones">
                        <input type="radio" name="notificaciones" value="No" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>No</label>
                    </div>
                </div>

                <!-- Aportar conocimiento -->
                <label class="standalone-label" data-node-id="197-541">¿Estarías interesado en aportar tu conocimiento a la comunidad ?</label>
                <div class="yes-no-container" data-node-id="200-858">
                    <div class="checkbox-item" data-radio-group="aportar_conocimiento">
                        <input type="radio" name="aportar_conocimiento" value="Sí" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Sí</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="aportar_conocimiento">
                        <input type="radio" name="aportar_conocimiento" value="No" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>No</label>
                    </div>
                </div>

                <!-- Assessment -->
                <label class="standalone-label" data-node-id="197-543">¿Te gustaría acceder a un assessment personal para conocer mejor tus fortalezas?</label>
                <div class="yes-no-container" data-node-id="200-868">
                    <div class="checkbox-item" data-radio-group="assessment">
                        <input type="radio" name="assessment" value="Sí" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>Sí</label>
                    </div>
                    <div class="checkbox-item" data-radio-group="assessment">
                        <input type="radio" name="assessment" value="No" class="hidden-checkbox">
                        <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon">
                        <label>No</label>
                    </div>
                </div>

                <!-- Otros comentarios -->
                <label class="standalone-label" data-node-id="197-545">Otros comentarios de interés que creas importantes de resaltar</label>
                <textarea class="textarea-small" name="comentarios" data-node-id="200-846"></textarea>

                <!-- Privacy Policy -->
                <div class="privacy-checkbox" data-checkbox data-node-id="200-845">
                    <input type="checkbox" name="privacy_policy" class="hidden-checkbox" required>
                    <img src="assets/check_box_outline_blank.svg" alt="Unchecked" class="checkbox-icon" data-node-id="200-842">
                    <label data-node-id="197-547">He leido y acepto la política de privacidad de datos de Senior Advisors Movilizadores SL</label>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="submit-button" data-node-id="197-565">
                    <span>enviar</span>
                    <div class="submit-arrow">
                        <img src="assets/arrow_back.svg" alt="Arrow">
                    </div>
                </button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const advisorsForm = document.getElementById('advisorsForm');
            
            // Handle checkbox clicks
            const checkboxItems = document.querySelectorAll('[data-checkbox]');
            const checkedImg = 'assets/check_box.svg';
            const uncheckedImg = 'assets/check_box_outline_blank.svg';
            
            checkboxItems.forEach(item => {
                item.addEventListener('click', function() {
                    const checkbox = this.querySelector('.hidden-checkbox');
                    const icon = this.querySelector('.checkbox-icon');
                    
                    // Toggle checkbox
                    checkbox.checked = !checkbox.checked;
                    
                    // Update icon
                    if (checkbox.checked) {
                        icon.src = checkedImg;
                        icon.alt = 'Checked';
                    } else {
                        icon.src = uncheckedImg;
                        icon.alt = 'Unchecked';
                    }
                });
            });
            
            // Handle radio button groups (single-choice selections)
            const radioItems = document.querySelectorAll('[data-radio-group]');
            radioItems.forEach(item => {
                item.addEventListener('click', function() {
                    const radioInput = this.querySelector('input[type="radio"]');
                    const groupName = radioInput.name;
                    
                    // Uncheck all in the same group
                    const allInGroup = document.querySelectorAll(`[data-radio-group="${groupName}"]`);
                    allInGroup.forEach(groupItem => {
                        const groupRadio = groupItem.querySelector('input[type="radio"]');
                        const groupIcon = groupItem.querySelector('.checkbox-icon');
                        groupRadio.checked = false;
                        groupIcon.src = uncheckedImg;
                        groupIcon.alt = 'Unchecked';
                    });
                    
                    // Check the clicked one
                    radioInput.checked = true;
                    const icon = this.querySelector('.checkbox-icon');
                    icon.src = checkedImg;
                    icon.alt = 'Checked';
                });
            });
            
            if (advisorsForm) {
                advisorsForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    // Check required fields
                    const requiredFields = this.querySelectorAll('input[required]:not([type="checkbox"]):not([type="radio"]), textarea[required]');
                    let allFilled = true;
                    
                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            allFilled = false;
                        }
                    });
                    
                    if (!allFilled) {
                        alert('Por favor, complete todos los campos obligatorios marcados con *');
                        return false;
                    }

                    // Check at least one area de intervención checkbox is checked
                    const areasChecked = this.querySelectorAll('input[name="areas_intervencion[]"]:checked');
                    if (areasChecked.length === 0) {
                        alert('Por favor, seleccione al menos un área de intervención.');
                        return false;
                    }

                    // Check disponibilidad para viajar is selected
                    const disponibilidadChecked = this.querySelector('input[name="disponibilidad_viajar"]:checked');
                    if (!disponibilidadChecked) {
                        alert('Por favor, seleccione su disponibilidad para viajar.');
                        return false;
                    }

                    // Check privacy policy checkbox
                    const privacyCheckbox = this.querySelector('input[name="privacy_policy"]');
                    if (!privacyCheckbox.checked) {
                        alert('Debe aceptar la política de privacidad para continuar.');
                        return false;
                    }

                    // Email validation
                    const email = this.querySelector('input[name="email"]').value;
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        alert('Por favor, introduzca una dirección de correo electrónico válida.');
                        return false;
                    }

                    // URL validation for LinkedIn
                    const linkedin = this.querySelector('input[name="linkedin"]').value;
                    const urlRegex = /^https?:\/\/.+/;
                    if (linkedin && !urlRegex.test(linkedin)) {
                        alert('Por favor, introduzca un enlace válido de LinkedIn (debe comenzar con http:// o https://).');
                        return false;
                    }

                    // Collect form data
                    const formData = {
                        formType: 'advisors',
                        nombre: this.querySelector('input[name="nombre"]').value.trim(),
                        apellidos: this.querySelector('input[name="apellidos"]').value.trim(),
                        email: email,
                        telefono: this.querySelector('input[name="telefono"]').value.trim(),
                        calle: this.querySelector('input[name="calle"]').value.trim(),
                        municipio: this.querySelector('input[name="municipio"]').value.trim(),
                        codigo_postal: this.querySelector('input[name="codigo_postal"]').value.trim(),
                        linkedin: linkedin,
                        anos_experiencia: this.querySelector('input[name="anos_experiencia"]').value.trim(),
                        horas_semanales: this.querySelector('input[name="horas_semanales"]').value.trim(),
                        horario_inicio: this.querySelector('input[name="horario_inicio"]').value.trim(),
                        horario_fin: this.querySelector('input[name="horario_fin"]').value.trim(),
                        dias_semana: Array.from(this.querySelectorAll('input[name="dias_semana[]"]:checked')).map(cb => cb.value),
                        honorarios: this.querySelector('textarea[name="honorarios"]').value.trim() || null,
                        disponibilidad_viajar: disponibilidadChecked.value,
                        bio: this.querySelector('textarea[name="bio"]').value.trim(),
                        areas_intervencion: Array.from(areasChecked).map(cb => cb.value),
                        resultados: this.querySelector('textarea[name="resultados"]').value.trim(),
                        certificacion: this.querySelector('input[name="certificacion"]:checked')?.value || null,
                        notificaciones: this.querySelector('input[name="notificaciones"]:checked')?.value || null,
                        aportar_conocimiento: this.querySelector('input[name="aportar_conocimiento"]:checked')?.value || null,
                        assessment: this.querySelector('input[name="assessment"]:checked')?.value || null,
                        comentarios: this.querySelector('textarea[name="comentarios"]').value.trim() || null
                    };

                    // Disable submit button
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span>enviando...</span>';

                    try {
                        const response = await fetch('/.netlify/functions/send_email', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(formData)
                        });

                        const result = await response.json();

                        if (result.success) {
                            alert('¡Gracias por su solicitud! Nos pondremos en contacto con usted pronto.');
                            this.reset();
                            // Reset checkbox and radio icons
                            checkboxItems.forEach(item => {
                                const icon = item.querySelector('.checkbox-icon');
                                icon.src = uncheckedImg;
                                icon.alt = 'Unchecked';
                            });
                            radioItems.forEach(item => {
                                const icon = item.querySelector('.checkbox-icon');
                                icon.src = uncheckedImg;
                                icon.alt = 'Unchecked';
                            });
                            // Redirect to home page
                            window.location.href = 'index.html';
                        } else {
                            throw new Error(result.error || 'Error al enviar el formulario');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('Hubo un error al enviar su solicitud. Por favor, intente nuevamente.');
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = originalText;
                    }
                });
            }
        });
    </script>
</body>
</html>
